<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bid on <%= item.name %></title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <style>
        .font-display { font-family: 'Fredoka One', cursive; }
        .font-body { font-family: 'Nunito', sans-serif; }
    </style>
</head>
<body class="bg-gray-100 font-body text-gray-800 min-h-screen flex flex-col">

    <div class="container mx-auto px-4 py-8 flex-grow max-w-3xl">
        
        <a href="/" class="inline-block mb-6 text-gray-500 hover:text-black font-bold uppercase tracking-wider text-sm transition-colors">
            &larr; Back to Gallery
        </a>
        
        <div class="bg-white rounded-2xl overflow-hidden border-8 border-green-600 shadow-2xl">
            <img src="<%= item.image_url %>" alt="<%= item.name %>" class="w-full h-80 md:h-96 object-cover border-b-4 border-gray-100">
            
            <div class="p-6 md:p-10">
                <h1 class="text-4xl font-display mb-4 text-gray-900"><%= item.name %></h1>
                <p class="text-gray-600 mb-8 text-lg"><%= item.description %></p>
                
                <div class="bg-gray-700 p-6 rounded-2xl mb-8 border-l-8 border-yellow-300 text-white shadow-inner font-sans">
                    <p class="text-sm text-gray-400 uppercase font-bold tracking-wider mb-1">Current Highest Bid</p>
                    <p class="text-5xl font-bold text-green-400">$<%= Number(item.current_bid).toFixed(2) %></p>
                    <% if(item.bidder_name) { %>
                        <p class="text-sm text-gray-300 mt-2 font-bold uppercase tracking-wide">Held by: <span class="text-yellow-300"><%= item.bidder_name %></span></p>
                    <% } else { %>
                        <p class="text-sm text-gray-400 mt-2 font-bold uppercase tracking-wide">No bids yet. Be the first!</p>
                    <% } %>
                </div>

                <% if (message) { %>
                    <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-900 p-4 rounded-lg mb-8 font-bold">
                        <%= message %>
                    </div>
                <% } %>

                <% if (typeof isPaused !== 'undefined' && isPaused) { %>
                    <div class="bg-red-100 border-l-8 border-red-600 p-8 rounded-2xl text-center">
                        <h3 class="text-red-800 font-display text-2xl uppercase mb-2">Bidding Paused</h3>
                        <p class="text-red-700 font-bold uppercase tracking-wide">Please turn your attention to the stage!</p>
                    </div>
                <% } else { %>
                    <form action="/bid/<%= item.id %>" method="POST" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-gray-800 text-sm font-bold uppercase tracking-wider mb-2">Your Name</label>
                                <input type="text" name="name" required class="w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:border-black outline-none font-bold text-lg bg-gray-50">
                            </div>
                            <div>
                                <label class="block text-gray-800 text-sm font-bold uppercase tracking-wider mb-2">Email</label>
                                <input type="email" name="email" required class="w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:border-black outline-none font-bold text-lg bg-gray-50">
                            </div>
                        </div>
                        <div>
                            <label class="block text-gray-800 text-sm font-bold uppercase tracking-wider mb-2">Bid Amount ($)</label>
                            <% 
                                const isFirstBid = !item.bidder_name;
                                const minBid = isFirstBid ? item.current_bid : item.current_bid + 0.25;
                                const maxBid = item.current_bid + 5.00;
                            %>
                            <input type="number" step="0.01" name="amount" min="<%= minBid.toFixed(2) %>" max="<%= maxBid.toFixed(2) %>" required class="w-full px-4 py-4 border-4 border-gray-900 rounded-xl focus:border-yellow-400 outline-none font-sans font-bold text-3xl text-green-700 bg-gray-50" placeholder="e.g. <%= minBid.toFixed(2) %>">
                            <p class="text-xs text-gray-500 mt-2 font-bold uppercase tracking-wider">Max increase: $5.00</p>
                        </div>
                        
                        <button type="submit" class="w-full bg-yellow-300 hover:bg-yellow-400 text-black font-bold tracking-widest text-2xl py-4 rounded-2xl transition duration-200 uppercase shadow-md active:scale-95">
                            Place Bid
                        </button>
                    </form>
                <% } %>
            </div>
        </div>
    </div>

    <footer class="bg-black text-white text-center py-4 font-display text-sm uppercase tracking-widest mt-auto">
        <p>Austin College Service Station</p>
    </footer>
</body>
</html>